#!/bin/bash

# Get the list of modified, added, deleted, or renamed files
files=$(git diff --name-only --diff-filter=MARND)

# If there are no changed files, exit
if [ -z "$files" ]; then
    exit 0
fi

# Run PMD on the changed files
pmd -d . -R pmd-ruleset.xml "$files"

# If PMD found any issues, exit with a non-zero code
if [ $? -ne 0 ]; then
    exit 1
fi
